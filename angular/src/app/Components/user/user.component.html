<h1 class="display-4 text-center">User Admin</h1>
<hr />
<div class="container">
   <form #UserForm="ngForm" class="mb-5 p-2">
      <input type="hidden" [(ngModel)]="user.id" name="id">
   
      <div class="form-group row d-flex justify-content-between">
        <div class="col-12 col-md-6 row">
         <label for="firstName" class="col-sm-3 col-form-label">Frist Name</label>
   
            <input type="text" id="firstName" class="form-control col-sm-6" placeholder="Enter FristName ..."
               [(ngModel)]="user.firstName" name="firstName" #firstName="ngModel" required maxlength="20"
               pattern="^[a-zA-Z1-9].*" />
   
   
            <div class="text-danger col-sm-3" *ngIf="firstName.invalid">
               <span *ngIf="firstName.errors?.required">*</span>
               <span *ngIf="firstName.errors?.pattern">Empty feild is not allowed</span>
               <span *ngIf="firstName.errors?.maxlength">Maxlength is 20</span>
   
   
            </div>
         </div>
            
            <div class="col-12 col-md-6 row">
               <label for="Phone" class="col-sm-3 col-form-label">Phone</label>
         
                  <input type="number" id="phone" min="0" class="form-control col-sm-6" placeholder="Enter Phone ..."
                     [(ngModel)]="contact.phone" name="phone" />
         
         
                 
               </div>
      </div>
      <div class="form-group row d-flex justify-content-between">
         <div class="col-12 col-md-6 row">
            <label for="lastName" class="col-sm-3 col-form-label">Last Name</label>
            <input type="text" id="lastName" class="form-control col-sm-6" placeholder="Enter LastName ..."
               [(ngModel)]="user.lastName" name="lastName" #lastName="ngModel" required maxlength="20"
               pattern="^[a-zA-Z1-9].*" />
   
   
            <div class="text-danger col-sm-3" *ngIf="lastName.invalid">
               <span *ngIf="lastName.errors?.required">*</span>
               <span *ngIf="lastName.errors?.pattern">Empty feild is not allowed</span>
               <!-- <span *ngIf="Description.errors?.rangeLength">Maxlength is 10</span> [rangeLength]="[1, 10]" -->
               <span *ngIf="lastName.errors?.maxlength">Maxlength is 20</span>
   
            </div>
         </div>
               <div class="col-12 col-md-6 row">
                  <label for="email" class="col-sm-3 col-form-label">Email</label>
         
                  <input type="email" pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[A-Za-z]{2,3}$" id="Email" class="form-control col-sm-6" placeholder="example@example.com"
                     [(ngModel)]="contact.email" name="email" #email="ngModel" />
         
                     <div class="text-danger col-sm-3" *ngIf="email.invalid">
                        <span *ngIf="email.errors?.pattern">Invalid email</span>
                     </div>
                 
               </div>
      </div>
   
      <button mat-stroked-button [disabled]="UserForm.invalid || flag" class="btn btn-primary mr-3" (click)="Create(); UserForm.reset()">
         Create User
      </button>
   
      <button [disabled]="UserForm.invalid || !flag" class="btn btn-info" (click)="Update()">Update</button>
      <!-- <input type="reset" value="Reset" class="btn btn-secondary ml-3"> -->
      <button class="btn btn-secondary ml-3" (click)="Reset(UserForm)">Reset</button>
   
   </form>

<table class="table table-hover">
   <thead>
      <tr>
         <th>ID</th>
         <th>First Name</th>
         <th>Last Name</th>
         <th>Phone</th>
         <th>Email</th>
         <th></th>
      </tr>
   </thead>
   <tbody>
      <tr *ngIf="!users || users.length == 0; let idx = index;" class="text-danger">
         <td>No Data Found</td>
      </tr>
      <tr *ngFor="let item of users">
         <td>{{item.id}}</td>
         <td>{{item.firstName}}</td>
         <td>{{item.lastName}}</td>
         <td>{{item.contact?.phone}}</td>
         <td>{{item.contact?.email}}</td>
         <td>
            <a class="mr-3" (click)="Delete(item.id, idx)"><span class="fa fa-trash fa-lg text-danger"></span></a>
            <a (click)="Details(item.id)"><span class="fa fa-edit fa-lg text-info"></span></a>
         </td>
      </tr>

   </tbody>
</table>

<!-- <table mat-table [dataSource]="users" matSort class="mat-elevation-z8 w-100 table-responsive">
   <ng-container matColumnDef="firstName">
     <th class="m-2" mat-header-cell *matHeaderCellDef mat-sort-header> First Name </th>
     <td class="m-2" mat-cell *matCellDef="let element"> {{element.firstName}} </td>
   </ng-container>

   <ng-container matColumnDef="lastName">
     <th class="p-2" mat-header-cell *matHeaderCellDef mat-sort-header> Last Name </th>
     <td class="p-2" mat-cell *matCellDef="let element"> {{element.lastName}} </td>
   </ng-container>

   <ng-container matColumnDef="phone">
     <th class="p-2" mat-header-cell *matHeaderCellDef mat-sort-header> Phone </th>
     <td class="p-2" mat-cell *matCellDef="let element"> {{element.contact?.phone}} </td>
   </ng-container>

   <ng-container matColumnDef="email">
      <th class="p-2" mat-header-cell *matHeaderCellDef mat-sort-header> Email </th>
      <td class="p-2" mat-cell *matCellDef="let element"> {{element.contact?.email}} </td>
    </ng-container>
   <ng-container matColumnDef="Operations">
     <th mat-header-cell *matHeaderCellDef mat-sort-header> </th>
     <td mat-cell *matCellDef="let element; let idx = index;">
       <button mat-stroked-button (click)="Details(element.id)">
         <span class="fa fa-edit text-info mr-2"></span>Edit</button>
       <button mat-stroked-button class="m-3" (click)="Delete(element.id, idx)">
         <span class="fa fa-trash text-danger mr-2"></span> Delete</button>
     </td>
   </ng-container>

   <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
   <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
 </table> -->

</div>